<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<nav th:fragment="navbar (activeFragment)" class="navbar navbar-expand-lg navbar-light bg-secondary navbar-dark navbar-inverse navbar-fixed-top">
    <a class="navbar-brand fw-bold text-white ms-3" href="/">APAPEDIA</a>
    <button 
      class="navbar-toggler" 
      type="button" 
      data-toggle="collapse"
      data-target="#navbarNavAltMarkup"
      aria-controls="navbarNavAltMarkup" 
      aria-expanded="false" 
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="nav-item">
          <a class="nav-link" th:classappend="${activeFragment == 'catalog'} ? 'active' : ''" th:href="@{/catalog/all}">Catalog</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:classappend="${activeFragment == 'orders'} ? 'active' : ''" th:href="@{/orders/view-all}">Order History</a>
        </li>
        <li class="nav-item">
          <div class="dropdown">
            <a class="nav-link dropdown-toggle" th:classappend="${activeFragment == 'profile'} ? 'active' : ''" th:href="@{/profile}" role="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              Profile
            </a>
            <div class="dropdown-menu" aria-labelledby="profileDropdown">
              <a class="dropdown-item" th:if="${activeUser != null}" th:href="@{user/profile/withdraw/{id}(id=${activeUser.id})}">Withdraw Balance</a>
              <a class="dropdown-item" th:if="${activeUser != null}" th:href="@{user/profile/edit/{id}(id=${activeUser.id})}">Edit Profile</a>
            </div>
          </div>
        </li>
        <li class="nav-item" th:if="${session == null || session.accessToken == null}">
          <a class="nav-link" th:classappend="${activeFragment == ''} ? '' : ''" th:href="@{/login}">Login</a>
        </li>
        <li class="nav-item" th:if="${session != null && session.accessToken != null && session.loginSSO == false}">
          <a class="nav-link" th:classappend="${activeFragment == ''} ? '' : ''" th:href="@{/logout}">Logout</a>
        </li>
        <li class="nav-item" th:if="${session != null && session.accessToken != null && session.loginSSO == true}">
          <a class="nav-link" th:classappend="${activeFragment == ''} ? '' : ''" th:href="@{/logout-sso}">Logout</a>
        </li>
      </ul>
    </div>
  </nav>
</body>
</html>

